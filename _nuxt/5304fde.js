/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{486:function(t,e,o){"use strict";o.d(e,"a",(function(){return Tt}));var n=o(461),r=o(443);const d=["click","dblclick"],l=["enter","leave"],c=d.concat(l);function h(t,e,o){if(t.listened)switch(e.type){case"mousemove":case"mouseout":!function(t,e){if(!t.moveListened)return;let element;"mousemove"===e.type&&(element=x(t.elements,e));const o=t.hovered;t.hovered=element,function(t,e,o){const{previous:n,element:element}=e;n&&n!==element&&f(n.options.leave||t.listeners.leave,n,o);element&&element!==n&&f(element.options.enter||t.listeners.enter,element,o)}(t,{previous:o,element:element},e)}(t,e);break;case"click":!function(t,e,o){const n=t.listeners,element=x(t.elements,e);if(element){const t=element.options,r=t.dblclick||n.dblclick,d=t.click||n.click;element.clickTimeout?(clearTimeout(element.clickTimeout),delete element.clickTimeout,f(r,element,e)):r?element.clickTimeout=setTimeout((()=>{delete element.clickTimeout,f(d,element,e)}),o.dblClickSpeed):f(d,element,e)}}(t,e,o)}}function f(t,element,e){Object(r.d)(t,[element.$context,e])}function x(t,e){let o=Number.POSITIVE_INFINITY;return t.filter((element=>element.options.display&&element.inRange(e.x,e.y))).reduce(((t,element)=>{const n=element.getCenterPoint(),d=Object(r.T)(e,n);return d<o?(t=[element],o=d):d===o&&t.push(element),t}),[]).sort(((a,b)=>a._index-b._index)).slice(0,1)[0]}function y(t,e,o){const n=function(t,e){const o=t.axis,n=t.id,d=o+"ScaleID",l={min:Object(r.Xb)(t.min,Number.NEGATIVE_INFINITY),max:Object(r.Xb)(t.max,Number.POSITIVE_INFINITY)};for(const r of e)r.scaleID===n?S(r,t,["value","endValue"],l):r[d]===n&&S(r,t,[o+"Min",o+"Max",o+"Value"],l);return l}(e,o);let d=w(e,n,"min","suggestedMin");d=w(e,n,"max","suggestedMax")||d,d&&"function"==typeof e.handleTickRangeOptions&&e.handleTickRangeOptions()}function w(t,e,o,n){if(Object(r.Ib)(e[o])&&!function(t,e,o){return Object(r.Lb)(t[e])||Object(r.Lb)(t[o])}(t.options,o,n)){const n=t[o]!==e[o];return t[o]=e[o],n}}function m(t,e){for(const o of["scaleID","xScaleID","yScaleID"])t[o]&&!e[t[o]]&&v(t,o)&&console.warn(`No scale found with id '${t[o]}' for annotation '${t.id}'`)}function v(t,e){if("scaleID"===e)return!0;const o=e.charAt(0);for(const e of["Min","Max","Value"])if(Object(r.Lb)(t[o+e]))return!0;return!1}function S(t,e,o,n){for(const d of o){const o=t[d];if(Object(r.Lb)(o)){const t=e.parse(o);n.min=Math.min(n.min,t),n.max=Math.max(n.max,t)}}}const O=.001,j=(t,e,o)=>Math.min(o,Math.max(e,t));function M(t,e,o){for(const n of Object.keys(t))t[n]=j(t[n],e,o);return t}function C(t,e,{x:o,y:n,width:r,height:d},l){const c=l/2;return t>=o-c-O&&t<=o+r+c+O&&e>=n-c-O&&e<=n+d+c+O}function k(element,t){const{x:e,y:o}=element.getProps(["x","y"],t);return{x:e,y:o}}const D=(t,e)=>e>t||t.length>e.length&&t.substr(0,e.length)===e;const P=s=>"string"==typeof s&&s.endsWith("%"),W=s=>j(parseFloat(s)/100,0,1);function I(t,e){return"start"===e?0:"end"===e?t:P(e)?W(e)*t:t/2}function A(t,e){return"number"==typeof e?e:P(e)?W(e)*t:t}function T(t){return Object(r.Kb)(t)?{x:Object(r.Xb)(t.x,"center"),y:Object(r.Xb)(t.y,"center")}:{x:t=Object(r.Xb)(t,"center"),y:t}}function R(t){return t&&(Object(r.Lb)(t.xValue)||Object(r.Lb)(t.yValue))}const X=new Map;function E(content){if(content&&"object"==typeof content){const t=content.toString();return"[object HTMLImageElement]"===t||"[object HTMLCanvasElement]"===t}}function Y(t,element,e){if(e){const o=element.getCenterPoint();t.translate(o.x,o.y),t.rotate(Object(r.Vb)(e)),t.translate(-o.x,-o.y)}}function V(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function L(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function H(t,e){const content=e.content;if(E(content))return{width:A(content.width,e.width),height:A(content.height,e.height)};const o=Object(r.p)(e.font),n=e.textStrokeWidth,d=Object(r.Cb)(content)?content:[content],l=d.join()+o.string+n+(t._measureText?"-spriting":"");if(!X.has(l)){t.save(),t.font=o.string;const e=d.length;let r=0;for(let i=0;i<e;i++){const text=d[i];r=Math.max(r,t.measureText(text).width+n)}t.restore();const c=e*o.lineHeight+n;X.set(l,{width:r,height:c})}return X.get(l)}function N(t,rect,e){const{x:o,y:n,width:d,height:l}=rect;t.save(),L(t,e);const c=V(t,e);t.fillStyle=e.backgroundColor,t.beginPath(),Object(r.xb)(t,{x:o,y:n,w:d,h:l,radius:M(Object(r.zb)(Object(r.Xb)(e.cornerRadius,e.borderRadius)),0,Math.min(d,l)/2)}),t.closePath(),t.fill(),c&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore()}function z(t,rect,e){const content=e.content;if(E(content))return void t.drawImage(content,rect.x,rect.y,rect.width,rect.height);const o=Object(r.Cb)(content)?content:[content],n=Object(r.p)(e.font),d=n.lineHeight,l=function(t,e){const{x:o,width:n}=t,r=e.textAlign;return"center"===r?o+n/2:"end"===r||"right"===r?o+n:o}(rect,e),c=rect.y+d/2+e.textStrokeWidth/2;t.save(),t.font=n.string,t.textBaseline="middle",t.textAlign=e.textAlign,function(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}(t,e)&&o.forEach(((e,i)=>t.strokeText(e,l,c+i*d))),t.fillStyle=e.color,o.forEach(((e,i)=>t.fillText(e,l,c+i*d))),t.restore()}function _(rect){const{x:t,y:e,width:o,height:n}=rect;return{x:t+o/2,y:e+n/2}}function B(t,e,o){const n=Math.cos(o),r=Math.sin(o),d=e.x,l=e.y;return{x:d+n*(t.x-d)-r*(t.y-l),y:l+r*(t.x-d)+n*(t.y-l)}}function $(t,e,o){return e="number"==typeof e?e:t.parse(e),Object(r.Ib)(e)?t.getPixelForValue(e):o}function J(t,e){if(t){const o=$(t,e.min,e.start),n=$(t,e.max,e.end);return{start:Math.min(o,n),end:Math.max(o,n)}}return{start:e.start,end:e.end}}function K(t,e){const{chartArea:o,scales:n}=t,r=n[e.xScaleID],d=n[e.yScaleID];let l=o.width/2,c=o.height/2;return r&&(l=$(r,e.xValue,l)),d&&(c=$(d,e.yValue,c)),{x:l,y:c}}function F(t,e){const o=t.scales[e.xScaleID],n=t.scales[e.yScaleID];let{top:r,left:d,bottom:l,right:c}=t.chartArea;if(!o&&!n)return{};const h=J(o,{min:e.xMin,max:e.xMax,start:d,end:c});d=h.start,c=h.end;const f=J(n,{min:e.yMin,max:e.yMax,start:r,end:l});return r=f.start,l=f.end,{x:d,y:r,x2:c,y2:l,width:c-d,height:l-r}}function U(t,e){if(!R(e)){const o=F(t,e),n=_(o);let r=e.radius;return r&&!isNaN(r)||(r=Math.min(o.width,o.height)/2,e.radius=r),{x:n.x+e.xAdjust,y:n.y+e.yAdjust,width:2*r,height:2*r}}return function(t,e){const o=K(t,e);return{x:o.x+e.xAdjust,y:o.y+e.yAdjust,width:2*e.radius,height:2*e.radius}}(t,e)}class G extends n.c{inRange(t,e,o){const{x:n,y:d}=B({x:t,y:e},this.getCenterPoint(o),Object(r.Vb)(-this.options.rotation));return C(n,d,this.getProps(["x","y","width","height"],o),this.options.borderWidth)}getCenterPoint(t){return _(this.getProps(["x","y","width","height"],t))}draw(t){t.save(),Y(t,this,this.options.rotation),N(t,this,this.options),t.restore()}drawLabel(t){const{x:e,y:o,width:n,height:d,options:l}=this,{label:label,borderWidth:c}=l,h=c/2,f=T(label.position),x=Object(r.l)(label.padding),y=H(t,label),w={x:Q(this,y,f,x),y:Z(this,y,f,x),width:y.width,height:y.height};t.save(),Y(t,this,label.rotation),t.beginPath(),t.rect(e+h+x.left,o+h+x.top,n-c-x.width,d-c-x.height),t.clip(),z(t,w,label),t.restore()}resolveElementProperties(t,e){return F(t,e)}}function Q(t,e,o,n){const{x:r,x2:d,width:l,options:c}=t,{xAdjust:h,borderWidth:f}=c.label;return tt({start:r,end:d,size:l},{position:o.x,padding:{start:n.left,end:n.right},adjust:h,borderWidth:f,size:e.width})}function Z(t,e,o,n){const{y:r,y2:d,height:l,options:c}=t,{yAdjust:h,borderWidth:f}=c.label;return tt({start:r,end:d,size:l},{position:o.y,padding:{start:n.top,end:n.bottom},adjust:h,borderWidth:f,size:e.height})}function tt(t,e){const{start:o,end:n}=t,{position:r,padding:{start:d,end:l},adjust:c,borderWidth:h}=e;return o+h/2+c+d+I(n-h-o-d-l-e.size,r)}G.id="boxAnnotation",G.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,cornerRadius:void 0,display:!0,label:{borderWidth:void 0,color:"black",content:null,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,xAdjust:0,yAdjust:0,width:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},G.defaultRoutes={borderColor:"color",backgroundColor:"color"},G.descriptors={label:{_fallback:!0}};const et=(t,e,o)=>({x:t.x+o*(e.x-t.x),y:t.y+o*(e.y-t.y)}),ot=(t,e,o)=>et(e,o,Math.abs((t-e.y)/(o.y-e.y))).x,nt=(t,e,o)=>et(e,o,Math.abs((t-e.x)/(o.x-e.x))).y,it=t=>t*t,st=.001;function at({x:t,y:e,x2:o,y2:n},{top:r,right:d,bottom:l,left:c}){return!(t<c&&o<c||t>d&&o>d||e<r&&n<r||e>l&&n>l)}function lt({x:t,y:e},o,{top:n,right:r,bottom:d,left:l}){return t<l&&(e=nt(l,{x:t,y:e},o),t=l),t>r&&(e=nt(r,{x:t,y:e},o),t=r),e<n&&(t=ot(n,{x:t,y:e},o),e=n),e>d&&(t=ot(d,{x:t,y:e},o),e=d),{x:t,y:e}}class ct extends n.c{intersects(t,e,o=.001,n){const{x:r,y:d,x2:l,y2:c}=this.getProps(["x","y","x2","y2"],n),h=l-r,f=c-d,x=it(h)+it(f),y=0===x?-1:((t-r)*h+(e-d)*f)/x;let w,m;return y<0?(w=r,m=d):y>1?(w=l,m=c):(w=r+y*h,m=d+y*f),it(t-w)+it(e-m)<=o}labelIsVisible(t,e){const o=this.options.label;return!(!o||!o.enabled)&&(!e||at(this.getProps(["x","y","x2","y2"],t),e))}isOnLabel(t,e,o){if(!this.labelIsVisible(o))return!1;const{labelX:n,labelY:r,labelWidth:d,labelHeight:l,labelRotation:c}=this.getProps(["labelX","labelY","labelWidth","labelHeight","labelRotation"],o),{x:h,y:f}=B({x:t,y:e},{x:n,y:r},-c),x=this.options.label.borderWidth/2||0,y=d/2+x,h2=l/2+x;return h>=n-y-st&&h<=n+y+st&&f>=r-h2-st&&f<=r+h2+st}inRange(t,e,o){const n=it(this.options.borderWidth/2);return this.intersects(t,e,n,o)||this.isOnLabel(t,e,o)}getCenterPoint(){return{x:(this.x2+this.x)/2,y:(this.y2+this.y)/2}}draw(t){const{x:e,y:o,x2:n,y2:r,options:d}=this;if(t.save(),!V(t,d))return t.restore();L(t,d);const l=Math.atan2(r-o,n-e),c=Math.sqrt(Math.pow(n-e,2)+Math.pow(r-o,2)),{startOpts:h,endOpts:f,startAdjust:x,endAdjust:y}=function(line){const t=line.options,e=t.arrowHeads&&t.arrowHeads.start,o=t.arrowHeads&&t.arrowHeads.end;return{startOpts:e,endOpts:o,startAdjust:ft(line,e),endAdjust:ft(line,o)}}(this);t.translate(e,o),t.rotate(l),t.beginPath(),t.moveTo(0+x,0),t.lineTo(c-y,0),t.shadowColor=d.borderShadowColor,t.stroke(),xt(t,0,x,h),xt(t,c,-y,f),t.restore()}drawLabel(t,e){if(!this.labelIsVisible(!1,e))return;const{labelX:o,labelY:n,labelWidth:r,labelHeight:d,labelRotation:l,labelPadding:c,labelTextSize:h,options:{label:label}}=this;t.save(),t.translate(o,n),t.rotate(l);N(t,{x:-r/2,y:-d/2,width:r,height:d},label);z(t,{x:-r/2+c.left+label.borderWidth/2,y:-d/2+c.top+label.borderWidth/2,width:h.width,height:h.height},label),t.restore()}resolveElementProperties(t,e){const o=t.scales[e.scaleID];let n,d,{top:l,left:c,bottom:h,right:f}=t.chartArea;if(o)n=$(o,e.value,NaN),d=$(o,e.endValue,n),o.isHorizontal()?(c=n,f=d):(l=n,h=d);else{const o=t.scales[e.xScaleID],n=t.scales[e.yScaleID];o&&(c=$(o,e.xMin,c),f=$(o,e.xMax,f)),n&&(l=$(n,e.yMin,l),h=$(n,e.yMax,h))}const x=at({x:c,y:l,x2:f,y2:h},t.chartArea)?function(t,e,area){const{x:o,y:n}=lt(t,e,area),{x:r,y:d}=lt(e,t,area);return{x:o,y:n,x2:r,y2:d,width:Math.abs(r-o),height:Math.abs(d-n)}}({x:c,y:l},{x:f,y:h},t.chartArea):{x:c,y:l,x2:f,y2:h,width:Math.abs(f-c),height:Math.abs(h-l)},label=e.label;return label&&label.content?function(line,t,e){const{padding:o,xPadding:n,yPadding:d,borderWidth:l}=e,c=function(t,e,o){let n=t;(e||o)&&(n={x:e||6,y:o||6});return Object(r.l)(n)}(o,n,d),h=H(t.ctx,e),f=h.width+c.width+l,x=h.height+c.height+l,y=function(line,label,t,e){const{width:o,height:n,padding:d}=t,{xAdjust:l,yAdjust:c}=label,h={x:line.x,y:line.y},f={x:line.x2,y:line.y2},x="auto"===label.rotation?function(line){const{x:t,y:e,x2:o,y2:n}=line,d=Math.atan2(n-e,o-t);return d>r.q/2?d-r.q:d<r.q/-2?d+r.q:d}(line):Object(r.Vb)(label.rotation),y=function(t,e,o){const n=Math.cos(o),r=Math.sin(o);return{w:Math.abs(t*n)+Math.abs(e*r),h:Math.abs(t*r)+Math.abs(e*n)}}(o,n,x),w=function(line,label,t,e){let o;const n=function(line,t){const{x:e,x2:o,y:n,y2:r}=line,d=Math.min(n,r)-t.top,l=Math.min(e,o)-t.left,b=t.bottom-Math.max(n,r),c=t.right-Math.max(e,o);return{x:Math.min(l,c),y:Math.min(d,b),dx:l<=c?1:-1,dy:d<=b?1:-1}}(line,e);o="start"===label.position?ut({w:line.x2-line.x,h:line.y2-line.y},t,label,n):"end"===label.position?1-ut({w:line.x-line.x2,h:line.y-line.y2},t,label,n):I(1,label.position);return o}(line,label,{labelSize:y,padding:d},e),m=et(h,f,w),v={size:y.w,min:e.left,max:e.right,padding:d.left},S={size:y.h,min:e.top,max:e.bottom,padding:d.top};return{x:bt(m.x,v)+l,y:bt(m.y,S)+c,width:o,height:n,rotation:x}}(line,e,{width:f,height:x,padding:c},t.chartArea);return line.labelX=y.x,line.labelY=y.y,line.labelWidth=y.width,line.labelHeight=y.height,line.labelRotation=y.rotation,line.labelPadding=c,line.labelTextSize=h,line}(x,t,label):x}}ct.id="lineAnnotation";const ht={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,enabled:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function ut(t,e,label,o){const{labelSize:n,padding:r}=e,d=t.w*o.dx,l=t.h*o.dy,c=d>0&&(n.w/2+r.left-o.x)/d,h=l>0&&(n.h/2+r.top-o.y)/l;return j(Math.max(c,h),0,.25)}function bt(t,e){const{size:o,min:n,max:r,padding:d}=e,l=o/2;return o>r-n?(r+n)/2:(n>=t-d-l&&(t=n+d+l),r<=t+d+l&&(t=r-d-l),t)}function ft(line,t){if(!t||!t.enabled)return 0;const{length:e,width:o}=t,n=line.options.borderWidth/2,r={x:e,y:o+n},d={x:0,y:n};return Math.abs(ot(0,r,d))}function xt(t,e,o,n){if(!n||!n.enabled)return;const{length:r,width:d,fill:l,backgroundColor:c,borderColor:h}=n,f=Math.abs(e-r)+o;t.beginPath(),L(t,n),V(t,n),t.moveTo(f,-d),t.lineTo(e+o,0),t.lineTo(f,d),!0===l?(t.fillStyle=c||h,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=n.borderShadowColor,t.stroke()}ct.defaults={adjustScaleRange:!0,arrowHeads:{enabled:!1,end:Object.assign({},ht),fill:!1,length:12,start:Object.assign({},ht),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,display:!0,endValue:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,color:"#fff",content:null,cornerRadius:void 0,drawTime:void 0,enabled:!1,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xPadding:void 0,yAdjust:0,yPadding:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},ct.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},ct.defaultRoutes={borderColor:"color"};class yt extends n.c{inRange(t,e,o){return function(p,ellipse,t,e){const{width:o,height:n}=ellipse,d=ellipse.getCenterPoint(!0),l=o/2,c=n/2;if(l<=0||c<=0)return!1;const h=Object(r.Vb)(t||0),f=e/2||0,x=Math.cos(h),y=Math.sin(h),a=Math.pow(x*(p.x-d.x)+y*(p.y-d.y),2),b=Math.pow(y*(p.x-d.x)-x*(p.y-d.y),2);return a/Math.pow(l+f,2)+b/Math.pow(c+f,2)<=1.0001}({x:t,y:e},this.getProps(["width","height"],o),this.options.rotation,this.options.borderWidth)}getCenterPoint(t){return _(this.getProps(["x","y","width","height"],t))}draw(t){const{width:e,height:o,options:n}=this,d=this.getCenterPoint();t.save(),Y(t,this,n.rotation),L(t,this.options),t.beginPath(),t.fillStyle=n.backgroundColor;const l=V(t,n);t.ellipse(d.x,d.y,o/2,e/2,r.q/2,0,2*r.q),t.fill(),l&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){return F(t,e)}}yt.id="ellipseAnnotation",yt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:"x",yMax:void 0,yMin:void 0,yScaleID:"y"},yt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class pt extends n.c{inRange(t,e,o){const{x:n,y:d}=B({x:t,y:e},this.getCenterPoint(o),Object(r.Vb)(-this.options.rotation));return C(n,d,this.getProps(["x","y","width","height"],o),this.options.borderWidth)}getCenterPoint(t){return _(this.getProps(["x","y","width","height"],t))}draw(t){if(!this.options.content)return;const{labelX:e,labelY:o,labelWidth:n,labelHeight:d,options:l}=this;t.save(),Y(t,this,l.rotation),function(t,element){const{pointX:e,pointY:o,calloutPosition:n,options:d}=element;if(!n||element.inRange(e,o))return;const l=d.callout;t.save(),t.beginPath();if(!V(t,l))return t.restore();const{separatorStart:c,separatorEnd:h}=function(element,t){const{x:e,y:o,width:n,height:r}=element,d=function(element,t){const{width:e,height:o,options:n}=element,r=n.callout.margin+n.borderWidth/2;if("right"===t)return e+r;if("bottom"===t)return o+r;return-r}(element,t);let l,c;"left"===t||"right"===t?(l={x:e+d,y:o},c={x:l.x,y:l.y+r}):(l={x:e,y:o+d},c={x:l.x+n,y:l.y});return{separatorStart:l,separatorEnd:c}}(element,n),{sideStart:f,sideEnd:x}=function(element,t,e){const{y:o,width:n,height:r,options:d}=element,l=d.callout.start,c=function(t,e){const o=e.side;if("left"===t||"top"===t)return-o;return o}(t,d.callout);let h,f;"left"===t||"right"===t?(h={x:e.x,y:o+A(r,l)},f={x:h.x+c,y:h.y}):(h={x:e.x+A(n,l),y:e.y},f={x:h.x,y:h.y+c});return{sideStart:h,sideEnd:f}}(element,n,c);(l.margin>0||0===d.borderWidth)&&(t.moveTo(c.x,c.y),t.lineTo(h.x,h.y));t.moveTo(f.x,f.y),t.lineTo(x.x,x.y);const y=B({x:e,y:o},element.getCenterPoint(),Object(r.Vb)(-d.rotation));t.lineTo(y.x,y.y),t.stroke(),t.restore()}(t,this),N(t,this,l),z(t,{x:e,y:o,width:n,height:d},l),t.restore()}resolveElementProperties(t,e){const o=R(e)?K(t,e):_(F(t,e)),n=Object(r.l)(e.padding),d=H(t.ctx,e),l=function(t,e,o,n){const r=e.width+n.width+o.borderWidth,d=e.height+n.height+o.borderWidth,l=T(o.position);return{x:gt(t.x,r,o.xAdjust,l.x),y:gt(t.y,d,o.yAdjust,l.y),width:r,height:d}}(o,d,e,n),c=e.borderWidth/2,h={pointX:o.x,pointY:o.y,...l,labelX:l.x+n.left+c,labelY:l.y+n.top+c,labelWidth:d.width,labelHeight:d.height};return h.calloutPosition=e.callout.enabled&&function(t,e,o){const n=e.position;if("left"===n||"right"===n||"top"===n||"bottom"===n)return n;return function(t,e,o){const{x:n,y:d,width:l,height:c,pointX:h,pointY:f}=t,x={x:n+l/2,y:d+c/2},y=e.start,w=A(l,y),m=A(c,y),v=[n,n+w,n+w,n+l],S=[d+m,d+c,d,d+m],O=[];for(let t=0;t<4;t++){const e=B({x:v[t],y:S[t]},x,Object(r.Vb)(o));O.push({position:wt[t],distance:Object(r.T)(e,{x:h,y:f})})}return O.sort(((a,b)=>a.distance-b.distance))[0].position}(t,e,o)}(h,e.callout,e.rotation),h}}function gt(t,e,o=0,n){return t-I(e,n)+o}pt.id="labelAnnotation",pt.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,enabled:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},pt.defaultRoutes={borderColor:"color"};const wt=["left","bottom","top","right"];class mt extends n.c{inRange(t,e,o){const{width:n}=this.getProps(["width"],o);return function(t,e,o,n){if(!t||!e||o<=0)return!1;const r=n/2||0;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(o+r,2)}({x:t,y:e},this.getCenterPoint(o),n/2,this.options.borderWidth)}getCenterPoint(t){return k(this,t)}draw(t){const e=this.options,o=e.borderWidth;if(e.radius<.1)return;t.save(),t.fillStyle=e.backgroundColor,L(t,e);const n=V(t,e);e.borderWidth=0,Object(r.wb)(t,e,this.x,this.y),n&&!E(e.pointStyle)&&(t.shadowColor=e.borderShadowColor,t.stroke()),t.restore(),e.borderWidth=o}resolveElementProperties(t,e){return U(t,e)}}mt.id="pointAnnotation",mt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},mt.defaultRoutes={borderColor:"color",backgroundColor:"color"};class vt extends n.c{inRange(t,e,o){return this.options.radius>=.1&&this.elements.length>1&&function(t,e,o,n){let r=!1,d=t[t.length-1].getProps(["bX","bY"],n);for(const l of t){const t=l.getProps(["bX","bY"],n);t.bY>o!=d.bY>o&&e<(d.bX-t.bX)*(o-t.bY)/(d.bY-t.bY)+t.bX&&(r=!r),d=t}return r}(this.elements,t,e,o)}getCenterPoint(t){return k(this,t)}draw(t){const{elements:e,options:o}=this;t.save(),t.beginPath(),t.fillStyle=o.backgroundColor,L(t,o);const n=V(t,o);let r=!0;for(const o of e)r?(t.moveTo(o.x,o.y),r=!1):t.lineTo(o.x,o.y);t.closePath(),t.fill(),n&&(t.shadowColor=o.borderShadowColor,t.stroke()),t.restore()}resolveElementProperties(t,e){const{x:o,y:n,width:d,height:l}=U(t,e),{sides:c,radius:h,rotation:f,borderWidth:x}=e,y=x/2,w=[],m=2*r.q/c;let v=f*r.Db;for(let i=0;i<c;i++,v+=m){const t=Math.sin(v),e=Math.cos(v);w.push({type:"point",optionScope:"point",properties:{x:o+t*h,y:n-e*h,bX:o+t*(h+y),bY:n-e*(h+y)}})}return{x:o,y:n,width:d,height:l,elements:w,initProperties:{x:o,y:n}}}}vt.id="polygonAnnotation",vt.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:"x",xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:"y",yValue:void 0},vt.defaultRoutes={borderColor:"color",backgroundColor:"color"};const St={box:G,ellipse:yt,label:pt,line:ct,point:mt,polygon:vt};Object.keys(St).forEach((t=>{n.e.describe(`elements.${St[t].id}`,{_fallback:"plugins.annotation"})}));const Ot={update:Object.assign};function jt(t="line"){return St[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Mt(t,e,o,d){const l=function(t,e,o){if("reset"===o||"none"===o||"resize"===o)return Ot;return new n.a(t,e)}(t,o.animations,d),c=e.annotations,h=function(t,e){const o=e.length,n=t.length;if(n<o){const e=o-n;t.splice(n,0,...new Array(e))}else n>o&&t.splice(o,n-o);return t}(e.elements,c);for(let i=0;i<c.length;i++){const e=c[i],element=Dt(h,i,e.type),o=e.setContext(It(t,element,e)),n=element.resolveElementProperties(t,o);n.skip=Ct(n),"elements"in n&&(kt(element,n,o,l),delete n.elements),Object(r.Lb)(element.x)||Object.assign(element,n),n.options=Pt(o),l.update(element,n)}}function Ct(t){return isNaN(t.x)||isNaN(t.y)}function kt(t,{elements:e,initProperties:o},n,r){const d=t.elements||(t.elements=[]);d.length=e.length;for(let i=0;i<e.length;i++){const t=e[i],l=t.properties,c=Dt(d,i,t.type,o),h=n[t.optionScope].override(t);l.options=Pt(h),r.update(c,l)}}function Dt(t,e,o,n){const d=St[jt(o)];let element=t[e];return element&&element instanceof d||(element=t[e]=new d,Object(r.Kb)(n)&&Object.assign(element,n)),element}function Pt(t){const e=St[jt(t.type)],o={};o.id=t.id,o.type=t.type,o.drawTime=t.drawTime,Object.assign(o,Wt(t,e.defaults),Wt(t,e.defaultRoutes));for(const e of c)o[e]=t[e];return o}function Wt(t,defs){const e={};for(const o of Object.keys(defs)){const n=defs[o],d=t[o];e[o]=Object(r.Kb)(n)?Wt(d,n):d}return e}function It(t,element,e){return element.$context||(element.$context=Object.assign(Object.create(t.getContext()),{element:element,id:e.id,type:"annotation"}))}const At=new Map;var Tt={id:"annotation",version:"1.4.0",afterRegister(){n.b.register(St),function(t,e,o,n=!0){const r=o.split(".");let i=0;for(const d of e.split(".")){const l=r[i++];if(parseInt(d,10)<parseInt(l,10))break;if(D(l,d)){if(n)throw new Error(`${t} v${o} is not supported. v${e} or newer is required.`);return!1}}return!0}("chart.js","3.7",n.b.version,!1)||(console.warn("chartjs-plugin-annotation has known issues with chart.js versions prior to 3.7, please consider upgrading."),n.b.defaults.set("elements.lineAnnotation",{callout:{},font:{},padding:6}))},afterUnregister(){n.b.unregister(St)},beforeInit(t){At.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1})},beforeUpdate(t,e,o){const n=At.get(t).annotations=[];let d=o.annotations;Object(r.Kb)(d)?Object.keys(d).forEach((t=>{const e=d[t];Object(r.Kb)(e)&&(e.id=t,n.push(e))})):Object(r.Cb)(d)&&n.push(...d),function(t,e){for(const o of t)m(o,e)}(n,t.scales)},afterDataLimits(t,e){const o=At.get(t);y(0,e.scale,o.annotations.filter((a=>a.display&&a.adjustScaleRange)))},afterUpdate(t,e,o){const n=At.get(t);!function(t,e,o){e.listened=!1,e.moveListened=!1,c.forEach((t=>{"function"==typeof o[t]?(e.listened=!0,e.listeners[t]=o[t]):Object(r.Lb)(e.listeners[t])&&delete e.listeners[t]})),l.forEach((t=>{"function"==typeof o[t]&&(e.moveListened=!0)})),e.listened&&e.moveListened||e.annotations.forEach((t=>{e.listened||d.forEach((o=>{"function"==typeof t[o]&&(e.listened=!0)})),e.moveListened||l.forEach((o=>{"function"==typeof t[o]&&(e.listened=!0,e.moveListened=!0)}))}))}(0,n,o),Mt(t,n,o,e.mode),n.visibleElements=n.elements.filter((t=>!t.skip&&t.options.display))},beforeDatasetsDraw(t,e,o){Rt(t,"beforeDatasetsDraw",o.clip)},afterDatasetsDraw(t,e,o){Rt(t,"afterDatasetsDraw",o.clip)},beforeDraw(t,e,o){Rt(t,"beforeDraw",o.clip)},afterDraw(t,e,o){Rt(t,"afterDraw",o.clip)},beforeEvent(t,e,o){h(At.get(t),e.event,o)},destroy(t){At.delete(t)},_getState:t=>At.get(t),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","pointX","pointY","labelX","labelY","labelWidth","labelHeight","radius"],type:"number"}},clip:!0,dblClickSpeed:350,drawTime:"afterDatasetsDraw",label:{drawTime:null}},descriptors:{_indexable:!1,_scriptable:t=>!c.includes(t),annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${St[jt(e.type)].id}`}},additionalOptionScopes:[""]};function Rt(t,e,o){const{ctx:n,chartArea:d}=t,{visibleElements:l}=At.get(t);o&&Object(r.m)(n,d),Xt(n,l,e),function(t,e,o){for(const n of e)Object(r.Cb)(n.elements)&&Xt(t,n.elements,o)}(n,l,e),o&&Object(r.o)(n),l.forEach((t=>{if(!("drawLabel"in t))return;const label=t.options.label;label&&label.enabled&&label.content&&(label.drawTime||t.options.drawTime)===e&&t.drawLabel(n,d)}))}function Xt(t,e,o){for(const n of e)n.options.drawTime===o&&n.draw(t)}}}]);